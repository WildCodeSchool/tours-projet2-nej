<div class="container">
  <h1 class="mt-4">Mon établissement</h1>
  <div class="mt-3">
    <form #ef="ngForm"(ngSubmit)="ef.valid && onSubmit()" [formGroup]="etablishmentForm" #myForm="ngForm">
      <label for="type">
        <p class="label-txt">Type</p>
        <input type="text" id="type" class="input" formControlName="type" />
        <div class="line-box">
          <div class="line"></div>
        </div>
        <div *ngIf="etablishmentForm.get('type').invalid">
            type invalid
          </div>
      </label>

      <label for="name">
        <p class="label-txt">Nom</p>
        <input type="text" id="name" class="input" formControlName="name" />
        <div class="line-box">
          <div class="line"></div>
        </div>
        <div *ngIf="etablishmentForm.get('name').invalid">
          name invalid
        </div>
      </label>

      <label for="profile">
        <p class="label-txt">Profile</p>
        <input type="text" id="profile" class="input" formControlName="profile" />
        <div class="line-box">
          <div class="line"></div>
        </div>
        <div *ngIf="etablishmentForm.get('profile').invalid">
          profile invalid
        </div>
      </label>

      <label for="description">
        <p class="label-txt">Description</p>
        <input type="text" id="description" class="input" formControlName="description" />
        <div class="line-box">
          <div class="line"></div>
        </div>
        <div *ngIf="etablishmentForm.get('description').invalid">
            description invalid
          </div>
      </label>

      <h3>Address</h3>

      <div formGroupName="address">
        <label for="street">
          <p class="label-txt">Rue</p>
          <input type="text" class="input" id="street" formControlName="street" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="address.get('street').invalid">
              street invalid
            </div>
        </label>

        <label for="Zipcode">
          <p class="label-txt">Code Postale</p>
          <input type="text" class="input" id="Zipcode" formControlName="zipCode" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="address.get('zipCode').invalid">
              zipCode invalid
            </div>
        </label>

        <label for="city">
          <p class="label-txt">Ville</p>
          <input type="text" class="input" id="City" formControlName="city" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="address.get('city').invalid">
              city invalid
            </div>
        </label>

        <label for="number">
          <p class="label-txt">Numéro</p>
          <input type=" text" class="input" id="Number" formControlName="number" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="address.get('number').invalid">
              number invalid
            </div>
        </label>
      </div>

      <h3>Contact</h3>

      <div formGroupName="contact">
        <label for="phone">
          <p class="label-txt">Telephone</p>
          <input type="text" class="input" id="phone" formControlName="phone" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="contact.get('phone').invalid">
              street invalid
            </div>
        </label>

        <label for="email">
          <p class="label-txt">Email</p>
          <input type="text" class="input" id="email" formControlName="email" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="contact.get('email').invalid">
              street invalid
            </div>
        </label>
      </div>

      <h3>Réseaux</h3>

      <button (click)="addNetworks()">ajouter un Réseau</button>

      <div formArrayName="networks" *ngFor="let networks of etablishmentForm.controls.networks.controls; let i = index">
        <ng-container [formGroupName]="i">
          <label for="name">
            <p class="label-txt">Nom</p>
            <input type="text" class="input" id="name" formControlName="name">
            <div class="line-box">
              <div class="line"></div>
            </div>

          </label>
          <label for="link">
            <p class="label-txt">Lien</p>
            <input type="text" class="input" id="link" formControlName="link">
            <div class="line-box">
              <div class="line"></div>
            </div>
          </label>
          <button (click)="deleteNetworks(i)">Supprimer un réseau</button>
        </ng-container>
      </div>

      <h3>Medias</h3>

      <button (click)="addMedias()">Ajouter une image</button>

      <div formArrayName="medias" *ngFor="let medias of etablishmentForm.controls.medias.controls; let i = index">
        <ng-container [formGroupName]="i">
          <label for="Url">
            <p class="label-txt">Url</p>
            <input type="url" class="input" id="url" formControlName="url">
            <div class="line-box">
              <div class="line"></div>
            </div>
          </label>
          <label for="Order">
            <p class="label-txt">Ordre</p>
            <input type="text" class="input" id="order" formControlName="order">
            <div class="line-box">
              <div class="line"></div>
            </div>
          </label>
          <button (click)="deleteMedias(i)">Supprimer une image</button>
        </ng-container>
      </div>
      <div class="d-flex justify-content-center mt-5 mb-5">
        <button class="saveBtn" type="submit">Sauvegarder</button>
        <button class="resetBtn" type="button" (click)="deleteEtablishment()">Supprimer</button>
        <button class="backBtn" type="button" routerLink="/userAccount/establishment-profile">Retour</button>
      </div>
    </form>
  </div>
</div>

<div class="container">
  <h2 class="mt-4 ">Formulaire de réservation</h2>

  <button class="backBtn" type="button" routerLink="/">Retour</button>

  <form #bf="ngForm" (ngSubmit)="bf.valid && onSubmit()" [formGroup]="bookingForm" #myForm="ngForm">
    <h3 class="alert alert-secondary text-center " role="alert">{{etablishmentValue.name}}</h3>
    <h3 class="mt-3">Date de réservation</h3>

    <div formGroupName="date" class="row">
      <label class="col-6">
        <p class="label-txt">Date de début</p>
        <input type="datetime" id="date1" class="input" formControlName="date1" ngbDatepicker #d="ngbDatepicker" />
        <div class="input-group-append">
          <button class="btn btn-outline-secondary calendar" (click)="d.toggle()" type="button"></button>
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="date.get('date1').invalid">
              Date invalid
            </div>
          </div>
        </div>
        <ngb-timepicker formControlName="start"></ngb-timepicker>
        <div *ngIf="date.get('start').invalid">
          Start invalid
        </div>
      </label>


      <label class="col-6">
        <p class="label-txt">Date de fin</p>
        <input type="datetime" id="date2" class="input" formControlName="date2" ngbDatepicker #f="ngbDatepicker" />
        <div class="input-group-append">
          <button class="btn btn-outline-secondary calendar" (click)="f.toggle()" type="button"></button>
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="date.get('date2').invalid">
              date invalid
            </div>
          </div>
        </div>
        <ngb-timepicker formControlName="end"></ngb-timepicker>
        <div *ngIf="date.get('end').invalid">
          Hour invalid
        </div>
      </label>
    </div>


    <h3>Client</h3>

    <div formGroupName="owner">
      <label>
        <p class="label-txt">Nom</p>
        <input type="text" class="input" id="name" formControlName="name" />
        <div class="line-box">
          <div class="line"></div>
          <div *ngIf="owner.get('name').invalid">
            Name invalid
          </div>
        </div>
      </label>

      <h3>Adresse</h3>

      <div formGroupName="address" class="row">
        <label class=" col-4" for="zipCode">
          <p class="label-txt">Code postal</p>
          <input type="text" class="input" id="zipCode" formControlName="zipCode" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="address.get('zipCode').invalid">
            Zipcode invalid
          </div>
        </label>

        <label class="col-8" for="townName">
          <p class="label-txt">Ville</p>
          <input type="text" class="input" id="city" formControlName="city" />
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="address.get('city').invalid">
              city invalid
            </div>
          </div>
        </label>

        <label class="col-4" for="streetNumber">
          <p class="label-txt">Numéro de rue</p>
          <input type="text" class="input" id="number" formControlName="number" />
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="address.get('number').invalid">
              streetnumber invalid
            </div>
          </div>
        </label>

        <label class="col-8" for="streetName">
          <p class="label-txt">Rue</p>
          <input type="text" class="input" id="street" formControlName="street" />
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="address.get('street').invalid">
              streetName invalid
            </div>
          </div>
        </label>
      </div>

      <h3>Contact</h3>

      <div formGroupName="contact" class="row">
        <label class="col-6" for="phone">
          <p class="label-txt">Téléphone</p>
          <input type="text" class="input" id="phone" formControlName="phone" />
          <div class="line-box">
            <div class="line"></div>
            <div *ngIf="contact.get('phone').invalid">
              phone invalid
            </div>
          </div>
        </label>

        <label class="col-6" for="email">
          <p class="label-txt">Email</p>
          <input type="text" class="input" id="email" formControlName="email" />
          <div class="line-box">
            <div class="line"></div>
          </div>
          <div *ngIf="contact.get('email').invalid">
            email invalid
          </div>
        </label>
      </div>
    </div>

    <h3>Divers</h3>
    <label for="numbersPers">
      <p class="label-txt">Nombre de personnes</p>
      <input type="text" class="input" id="numbers" formControlName="numbers" />
      <div class="line-box">
        <div class="line"></div>
      </div>
      <div *ngIf="bookingForm.get('numbers').invalid">
        numbers invalid
      </div>
    </label>


    <label *ngIf="est" for="establishmentBooking">
      <p class="label-txt">Établissement</p>
      <input type="text" class="input" id="establishment" formControlName="establishment" />
      <div class="line-box">
        <div class="line"></div>
      </div>
    </label>

    <div class="d-flex justify-content-center mb-5">
      <button class="saveBtn" type="submit">Sauvegarder</button>
      <a routerLink="" *ngIf="!est"><button class="resetBtn" type="button">Annuler</button></a>
      <button *ngIf="est" class="resetBtn" type="button" (click)="deleteBooking()">Supprimer la réservation</button>
      <button class="backBtn" type="button" routerLink="/">Retour</button>
    </div>
  </form>
</div>
